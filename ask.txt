import React, { useState } from "react";
import { FaPaw } from "react-icons/fa6";
import axiosInstance from "../utils/axiosInstance";
import { useNavigate } from "react-router-dom";
import NotFound from "../pages/NotFound";

const SearchBar = ({ inputWidth }) => {
  const [searchTerm, setSearchTerm] = useState("");
  const navigate = useNavigate();

  // Search for MIPS instruction
  const onSearch = async (e) => {
    e.preventDefault();

    // Add a random parameter to prevent caching
    const timestamp = new Date().getTime();
    const url = `search-data?keyword=${searchTerm}&t=${timestamp}`;

    try {
      const res = await axiosInstance.get(url, { cache: false });
      console.log(res.data);

      if (res.data.isValid) {
        navigate(`/search/search-data?keyword=${searchTerm}&t=${timestamp}`);
      } else {
        navigate(NotFound);
      }
    } catch (error) {
      console.log("Error fetching data: ", error);
    }
  };

  return (
    <div
      className=""
    >
      <input
        type="text"
        name="mips="
        required
        value={searchTerm}
        onChange={(e) => setSearchTerm(e.target.value)}
      />

      <button type="submit" className="search-btn" onClick={onSearch}>
        <FaPaw />
      </button>
    </div>
  );
};

export default SearchBar;
